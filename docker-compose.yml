version: '3.8'

services:
  device-emulator-standalone:
    image: device-emulator
    container_name: device-emulator-standalone
    build:
      context: .
      dockerfile: .devcontainer/Dockerfile
      network: host
    # TODO : add users file with id,token
    command: python src/run_without_scripts.py
    environment:
      - NGINX_HOST_CONFIG=${NGINX_HOST_CONFIG}
    volumes:
      - type: bind
        source: .
        target: /usr/src/app
        consistency: cached

